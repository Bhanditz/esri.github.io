angular.module("angular-dimple",["angular-dimple.graph","angular-dimple.legend","angular-dimple.x","angular-dimple.y","angular-dimple.r","angular-dimple.line","angular-dimple.bar","angular-dimple.stacked-bar","angular-dimple.area","angular-dimple.stacked-area","angular-dimple.scatter-plot","angular-dimple.ring"]).constant("MODULE_VERSION","0.0.1").value("defaults",{foo:"bar"}),angular.module("angular-dimple.area",[]).directive("area",[function(){return{restrict:"E",replace:!0,require:["area","^graph"],controller:["$scope","$element","$attrs",function(e,r,t){}],link:function(e,r,t,a){function i(){var r;if(t.value)r=n.addSeries([t.field],dimple.plot.area),l.filter(t),r.lineMarkers=!0;else{var a=dimple.getUniqueValues(e.data,t.field);angular.forEach(a,function(e){r=n.addSeries([t.field],dimple.plot.area),l.filter(t),r.lineMarkers=!0})}l.draw()}var l=a[1],n=(a[0],l.getChart());e.$watch("dataReady",function(e,r){e===!0&&i()})}}}]),angular.module("angular-dimple.bar",[]).directive("bar",[function(){return{restrict:"E",replace:!0,require:["bar","^graph"],controller:["$scope","$element","$attrs",function(e,r,t){}],link:function(e,r,t,a){function i(){bar=n.addSeries([t.field],dimple.plot.bar),l.filter(t),l.draw()}var l=a[1],n=(a[0],l.getChart());e.$watch("dataReady",function(e,r){e===!0&&i()})}}}]),angular.module("angular-dimple.graph",[]).directive("graph",[function(){return{restrict:"E",replace:!0,scope:{data:"=",color:"="},require:["graph"],transclude:!0,link:function(e,r,t,a,i){var l=a[0];l._createChart(),e.dataReady=!1,e.filters=[];var n,d=l.getChart();n=t.transition?t.transition:750,e.$watch("data",function(r,t){r&&(e.dataReady=!0,l.setData(),d.draw(n))}),i(e,function(e){r.append(e)})},controller:["$scope","$element","$attrs",function(e,r,t){var a,i=(1e9*Math.random()).toString(36).replace(".","_");r.append('<div class="dimple-graph" id="dng-'+i+'"></div>'),this._createChart=function(){var r=t.width?t.width:"100%",l=t.height?t.height:"100%",n=dimple.newSvg("#dng-"+i,r,l),d=e.data;a=new dimple.chart(n,d),t.margin?a.setMargins(t.margin):a.setMargins(60,60,20,40);var o="false"===t.autoStyle?!0:!1;if(a.noFormats=o,t.color)for(var u=e.color,c=0;c<u.length;c++)a.assignColor(u[c].name,u[c].fill,u[c].stroke,u[c].opacity)},this.getChart=function(){return a},this.setData=function(){a.data=e.data},this.draw=function(){a.draw()},this.getID=function(){return i},this.filter=function(r){if(void 0!==r.value&&e.filters.push(r.value),e.filters.length&&(a.data=dimple.filterData(e.data,r.field,e.filters)),void 0!==r.filter){console.log("i see a filter");var t=r.filter.split(":"),i=t[0],l=[t[1]];a.data=dimple.filterData(e.data,i,l)}}}]}}]),angular.module("angular-dimple.legend",[]).directive("graphLegend",[function(){return{restrict:"E",replace:!0,require:["graphLegend","^graph"],controller:["$scope","$element","$attrs",function(e,r,t){}],link:function(e,r,t,a){function i(){var e=t.left?t.left:"10%",r=t.top?t.top:"4%",a=t.height?t.height:"10%",i=t.width?t.width:"90%",l=t.position?t.position:"left";n.addLegend(e,r,i,a,l)}var l=a[1],n=l.getChart();e.$watch("dataReady",function(e,r){e===!0&&i()})}}}]),angular.module("angular-dimple.line",[]).directive("line",[function(){return{restrict:"E",replace:!0,require:["line","^graph"],controller:["$scope","$element","$attrs",function(e,r,t){}],link:function(e,r,t,a){function i(){line=n.addSeries([t.field],dimple.plot.line),l.filter(t),line.lineMarkers=!0,l.draw()}var l=a[1],n=l.getChart();e.$watch("dataReady",function(e,r){e===!0&&i()})}}}]),angular.module("angular-dimple.r",[]).directive("r",[function(){return{restrict:"E",replace:!0,require:["r","^graph"],controller:["$scope","$element","$attrs",function(e,r,t){}],link:function(e,t,a,i){function l(){r=d.addMeasureAxis("p",a.field),a.title&&"null"!==a.title?r.title=a.title:"null"==a.title&&(r.title=null)}var n=i[1],d=n.getChart();e.$watch("data",function(e,r){e&&l()})}}}]),angular.module("angular-dimple.ring",[]).directive("ring",[function(){return{restrict:"E",replace:!0,require:["ring","^graph"],controller:["$scope","$element","$attrs",function(e,r,t){}],link:function(e,r,t,a){function i(){var e;ring=n.addSeries([t.field],dimple.plot.pie),t.thickness&&!t.diameter?(e=100-t.thickness+"%",ring.innerRadius=e):t.thickness&&t.diameter?(e=t.diameter-t.thickness+"%",ring.innerRadius=e):ring.innerRadius="50%",t.diameter&&(ring.outerRadius=t.diameter+"%"),l.filter(t),l.draw()}var l=a[1],n=(a[0],l.getChart());e.$watch("data",function(e,r){e&&i()})}}}]),angular.module("angular-dimple.scatter-plot",[]).directive("scatterPlot",[function(){return{restrict:"E",replace:!0,require:["scatterPlot","^graph"],controller:[function(){}],link:function(e,r,t,a){function i(){var e=[];t.series&&e.push(t.series),e.push(t.field),(t.label||""===t.label)&&e.push(t.label),scatterPlot=n.addSeries(e,dimple.plot.bubble),scatterPlot.aggregate=dimple.aggregateMethod.avg,l.filter(t),l.draw()}var l=a[1],n=l.getChart();e.$watch("dataReady",function(e,r){e===!0&&i()})}}}]),angular.module("angular-dimple.stacked-area",[]).directive("stackedArea",[function(){return{restrict:"E",replace:!0,require:["stackedArea","^graph"],controller:["$scope","$element","$attrs",function(e,r,t){}],link:function(e,r,t,a){function i(){var e;e=t.series?n.addSeries([t.series],dimple.plot.area):n.addSeries([t.field],dimple.plot.area),l.filter(t),e.lineMarkers=!1,l.draw()}var l=a[1],n=(a[0],l.getChart());e.$watch("dataReady",function(e,r){e===!0&&i()})}}}]),angular.module("angular-dimple.stacked-bar",[]).directive("stackedBar",[function(){return{restrict:"E",replace:!0,require:["stackedBar","^graph"],controller:["$scope","$element","$attrs",function(e,r,t){}],link:function(e,r,t,a){function i(){t.series?bar=n.addSeries([t.series],dimple.plot.bar):bar=n.addSeries([t.field],dimple.plot.bar),l.filter(t),l.draw()}var l=a[1],n=(a[0],l.getChart());e.$watch("dataReady",function(e,r){e===!0&&i()})}}}]),angular.module("angular-dimple.x",[]).directive("x",[function(){return{restrict:"E",replace:!0,require:["x","^graph"],controller:["$scope","$element","$attrs",function(e,r,t){}],link:function(e,r,t,a){function i(){var e;t.groupBy?("Measure"==t.type?e=n.addMeasureAxis("x",[t.groupBy,t.field]):"Percent"==t.type?e=n.addPctAxis("x",t.field):"Time"==t.type?(e=n.addTimeAxis("x",t.field),t.format&&(e.tickFormat=t.format)):e=n.addCategoryAxis("x",[t.groupBy,t.field]),t.orderBy&&e.addGroupOrderRule(t.orderBy)):("Measure"==t.type?e=n.addMeasureAxis("x",t.field):"Percent"==t.type?e=n.addPctAxis("x",t.field):"Time"==t.type?(e=n.addTimeAxis("x",t.field),t.format&&(e.tickFormat=t.format)):e=n.addCategoryAxis("x",t.field),t.orderBy&&e.addOrderRule(t.orderBy)),t.title&&"null"!==t.title?e.title=t.title:"null"==t.title&&(e.title=null)}var l=a[1],n=l.getChart();e.$watch("dataReady",function(e,r){e===!0&&i()})}}}]),angular.module("angular-dimple.y",[]).directive("y",[function(){return{restrict:"E",replace:!0,require:["y","^graph"],controller:["$scope","$element","$attrs",function(e,r,t){}],link:function(e,r,t,a){function i(){var e;t.groupBy?("Category"==t.type?e=n.addCategoryAxis("y",t.field):"Percent"==t.type?e=n.addPctAxis("y",t.field):"Time"==t.type?(e=n.addTimeAxis("x",t.field),t.format&&(e.tickFormat=t.format)):e=n.addMeasureAxis("y",t.field),t.orderBy&&e.addGroupOrderRule(t.orderBy)):("Category"==t.type?e=n.addCategoryAxis("y",t.field):"Percent"==t.type?e=n.addPctAxis("y",t.field):"Time"==t.type?(e=n.addTimeAxis("x",t.field),t.format&&(e.tickFormat=t.format)):e=n.addMeasureAxis("y",t.field),t.orderBy&&e.addOrderRule(t.orderBy)),t.title&&"null"!==t.title?e.title=t.title:"null"==t.title&&(e.title=null)}var l=a[1],n=l.getChart();e.$watch("dataReady",function(e,r){e===!0&&i()})}}}]);